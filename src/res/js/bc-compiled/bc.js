var BC=function(h){var d=h.Matrix=h.Matrix||{};d.makeLookAt=function(a,c,e){c=BC.Math.normalize(BC.Math.subtractVectors(a,c));e=BC.Math.cross(e,c);var b=BC.Math.cross(c,e);return[e[0],e[1],e[2],0,b[0],b[1],b[2],0,c[0],c[1],c[2],0,a[0],a[1],a[2],1]};d.makePerspective=function(a,c,e,b){a=Math.tan(0.5*Math.PI-0.5*a);var d=1/(e-b);return[a/c,0,0,0,0,a,0,0,0,0,(e+b)*d,-1,0,0,e*b*d*2,0]};d.makeTranslation=function(a,c,e){return[1,0,0,0,0,1,0,0,0,0,1,0,a,c,e,1]};d.makeXRotation=function(a){var c=Math.cos(a);
a=Math.sin(a);return[1,0,0,0,0,c,a,0,0,-a,c,0,0,0,0,1]};d.makeYRotation=function(a){var c=Math.cos(a);a=Math.sin(a);return[c,0,-a,0,0,1,0,0,a,0,c,0,0,0,0,1]};d.makeZRotation=function(a){var c=Math.cos(a);a=Math.sin(a);return[c,a,0,0,-a,c,0,0,0,0,1,0,0,0,0,1]};d.makeScale=function(a,c,e){return[a,0,0,0,0,c,0,0,0,0,e,0,0,0,0,1]};d.makeInverse=function(a){var c=a[0],e=a[1],b=a[2],d=a[3],k=a[4],g=a[5],h=a[6],q=a[7],p=a[8],r=a[9],w=a[10],s=a[11],f=a[12],l=a[13],m=a[14];a=a[15];var u=w*a,t=m*s,x=h*a,v=
m*q,y=h*s,z=w*q,A=b*a,B=m*d,C=b*s,D=w*d,E=b*q,F=h*d,G=p*l,H=f*r,I=k*l,J=f*g,K=k*r,L=p*g,M=c*l,N=f*e,O=c*r,P=p*e,Q=c*g,R=k*e,S=u*g+v*r+y*l-(t*g+x*r+z*l),T=t*e+A*r+D*l-(u*e+B*r+C*l),l=x*e+B*g+E*l-(v*e+A*g+F*l),e=z*e+C*g+F*r-(y*e+D*g+E*r),g=1/(c*S+k*T+p*l+f*e);return[g*S,g*T,g*l,g*e,g*(t*k+x*p+z*f-(u*k+v*p+y*f)),g*(u*c+B*p+C*f-(t*c+A*p+D*f)),g*(v*c+A*k+F*f-(x*c+B*k+E*f)),g*(y*c+D*k+E*p-(z*c+C*k+F*p)),g*(G*q+J*s+K*a-(H*q+I*s+L*a)),g*(H*d+M*s+P*a-(G*d+N*s+O*a)),g*(I*d+N*q+Q*a-(J*d+M*q+R*a)),g*(L*d+O*q+
R*s-(K*d+P*q+Q*s)),g*(I*w+L*m+H*h-(K*m+G*h+J*w)),g*(O*m+G*b+N*w-(M*w+P*m+H*b)),g*(M*h+R*m+J*b-(Q*m+I*b+N*h)),g*(Q*w+K*b+P*h-(O*h+R*w+L*b))]};d.matrixMultiply=function(a,c){return[a[0]*c[0]+a[1]*c[4]+a[2]*c[8]+a[3]*c[12],a[0]*c[1]+a[1]*c[5]+a[2]*c[9]+a[3]*c[13],a[0]*c[2]+a[1]*c[6]+a[2]*c[10]+a[3]*c[14],a[0]*c[3]+a[1]*c[7]+a[2]*c[11]+a[3]*c[15],a[4]*c[0]+a[5]*c[4]+a[6]*c[8]+a[7]*c[12],a[4]*c[1]+a[5]*c[5]+a[6]*c[9]+a[7]*c[13],a[4]*c[2]+a[5]*c[6]+a[6]*c[10]+a[7]*c[14],a[4]*c[3]+a[5]*c[7]+a[6]*c[11]+a[7]*
c[15],a[8]*c[0]+a[9]*c[4]+a[10]*c[8]+a[11]*c[12],a[8]*c[1]+a[9]*c[5]+a[10]*c[9]+a[11]*c[13],a[8]*c[2]+a[9]*c[6]+a[10]*c[10]+a[11]*c[14],a[8]*c[3]+a[9]*c[7]+a[10]*c[11]+a[11]*c[15],a[12]*c[0]+a[13]*c[4]+a[14]*c[8]+a[15]*c[12],a[12]*c[1]+a[13]*c[5]+a[14]*c[9]+a[15]*c[13],a[12]*c[2]+a[13]*c[6]+a[14]*c[10]+a[15]*c[14],a[12]*c[3]+a[13]*c[7]+a[14]*c[11]+a[15]*c[15]]};return h}(BC||{});BC=function(h){(h.Time=h.Time||{}).getTimeInSeconds=function(){return 0.001*Date.now()};return h}(BC||{});BC=function(h){(h.Ring=h.Ring||{}).makeRing=function(d,a,c){for(var e=a.numSlices,b=a.outerRadius,n=a.maxY,k=a.minY,g=BC.Math.circlePoints(a.innerRadius,e),e=BC.Math.circlePoints(b,e),b=[],h=[],q=0,p=function(a,b,c,d,e,f,g){b=a.textureCoord(b,c);h[q++]=b[0];h[q++]=b[1];b=a.textureCoord(d,e);h[q++]=b[0];h[q++]=b[1];b=a.textureCoord(f,g);h[q++]=b[0];h[q++]=b[1]},r=0,w=0,s=0,f=0,l=0;s<a.numSlices;s++,l+=2){for(var m=(l+2)%e.length;w===r;)r=Math.floor(Math.random()*c.length);var w=r,u=c[r];b[f++]=g[l];
b[f++]=n;b[f++]=-g[l+1];b[f++]=e[l];b[f++]=n;b[f++]=-e[l+1];b[f++]=e[m];b[f++]=n;b[f++]=-e[m+1];p(u,0,0,0,1,1,1);b[f++]=g[l];b[f++]=n;b[f++]=-g[l+1];b[f++]=e[m];b[f++]=n;b[f++]=-e[m+1];b[f++]=g[m];b[f++]=n;b[f++]=-g[m+1];p(u,0,0,1,1,1,0);b[f++]=g[l];b[f++]=k;b[f++]=-g[l+1];b[f++]=e[m];b[f++]=k;b[f++]=-e[m+1];b[f++]=e[l];b[f++]=k;b[f++]=-e[l+1];p(u,0,0,1,1,0,1);b[f++]=g[l];b[f++]=k;b[f++]=-g[l+1];b[f++]=g[m];b[f++]=k;b[f++]=-g[m+1];b[f++]=e[m];b[f++]=k;b[f++]=-e[m+1];p(u,0,0,1,0,1,1);b[f++]=e[l];b[f++]=
k;b[f++]=-e[l+1];b[f++]=e[m];b[f++]=k;b[f++]=-e[m+1];b[f++]=e[m];b[f++]=n;b[f++]=-e[m+1];p(u,0,1,1,1,1,0);b[f++]=e[l];b[f++]=k;b[f++]=-e[l+1];b[f++]=e[m];b[f++]=n;b[f++]=-e[m+1];b[f++]=e[l];b[f++]=n;b[f++]=-e[l+1];p(u,0,1,1,0,0,0);b[f++]=g[l];b[f++]=k;b[f++]=-g[l+1];b[f++]=g[m];b[f++]=n;b[f++]=-g[m+1];b[f++]=g[m];b[f++]=k;b[f++]=-g[m+1];p(u,0,1,1,0,1,1);b[f++]=g[l];b[f++]=k;b[f++]=-g[l+1];b[f++]=g[l];b[f++]=n;b[f++]=-g[l+1];b[f++]=g[m];b[f++]=n;b[f++]=-g[m+1];p(u,0,1,0,0,1,0)}var t=d.createBuffer();
d.bindBuffer(d.ARRAY_BUFFER,t);d.bufferData(d.ARRAY_BUFFER,new Float32Array(b),d.STATIC_DRAW);var x=b.length/3,v=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,v);d.bufferData(d.ARRAY_BUFFER,new Float32Array(h),d.STATIC_DRAW);return{draw:function(a,b){d.bindBuffer(d.ARRAY_BUFFER,t);d.enableVertexAttribArray(a);d.vertexAttribPointer(a,3,d.FLOAT,!1,0,0);d.bindBuffer(d.ARRAY_BUFFER,v);d.enableVertexAttribArray(b);d.vertexAttribPointer(b,2,d.FLOAT,!1,0,0);d.drawArrays(d.TRIANGLES,0,x)}}};return h}(BC||
{});BC=function(h){(h.Selector=h.Selector||{}).makeSelector=function(d,a,c){var e=a.minY,b=a.maxY;a=BC.Math.circlePoints(a.outerRadius+0.01,a.numSlices,-Math.PI/2);var n=a.length-2,k=[],g=0;k[g++]=a[n]+0.001;k[g++]=e;k[g++]=-a[n+1]-0.001;k[g++]=a[0]+0.001;k[g++]=e;k[g++]=-a[1]-0.001;k[g++]=a[0]+0.001;k[g++]=b;k[g++]=-a[1]-0.001;k[g++]=a[n]+0.001;k[g++]=b;k[g++]=-a[n+1]-0.001;k[g++]=a[0]+0.001;k[g++]=e;k[g++]=-a[1]-0.001;k[g++]=a[2]+0.001;k[g++]=e;k[g++]=-a[3]-0.001;k[g++]=a[2]+0.001;k[g++]=b;k[g++]=-a[3]-
0.001;k[g++]=a[0]+0.001;k[g++]=b;k[g++]=-a[1]-0.001;var h=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,h);d.bufferData(d.ARRAY_BUFFER,new Float32Array(k),d.STATIC_DRAW);e=c.textureCoord(0,0);b=c.textureCoord(1,0);a=c.textureCoord(1,1);c=c.textureCoord(0,1);c=new Float32Array([].concat(e,b,a,c,e,b,a,c));var q=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,q);d.bufferData(d.ARRAY_BUFFER,c,d.STATIC_DRAW);var p=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7]),r=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,
r);d.bufferData(d.ELEMENT_ARRAY_BUFFER,p,d.STATIC_DRAW);return{draw:function(a,b){d.enable(d.BLEND);d.bindBuffer(d.ARRAY_BUFFER,h);d.enableVertexAttribArray(a);d.vertexAttribPointer(a,3,d.FLOAT,!1,0,0);d.bindBuffer(d.ARRAY_BUFFER,q);d.enableVertexAttribArray(b);d.vertexAttribPointer(b,2,d.FLOAT,!1,0,0);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r);d.drawElements(d.TRIANGLES,p.length,d.UNSIGNED_SHORT,0);d.disable(d.BLEND)}}};return h}(BC||{});BC=function(h){(h.Game=h.Game||{}).run=function(){function d(){return e.width!=e.clientWidth||e.height!=e.clientHeight?(e.width=e.clientWidth,e.height=e.clientHeight,!0):!1}function a(){var a=e.width/e.height,b=BC.Math.radians(90);return BC.Matrix.makePerspective(b,a,1,2E3)}function c(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.viewport(0,0,b.canvas.width,b.canvas.height);var a=BC.Time.getTimeInSeconds(),d=a-w;w=a;b.uniformMatrix4fv(q,!1,x);b.uniformMatrix4fv(p,!1,l);s[0]+=t[0]*d;s[1]+=t[1]*
d;var e=BC.Matrix.makeZRotation(s[2]),a=BC.Matrix.makeYRotation(s[1]),d=BC.Matrix.makeXRotation(s[0]),e=BC.Matrix.matrixMultiply(f,e),e=BC.Matrix.matrixMultiply(e,a),e=BC.Matrix.matrixMultiply(e,d);b.uniformMatrix4fv(r,!1,e);y.draw(g,h);b.uniformMatrix4fv(r,!1,f);z.draw(g,h);requestAnimationFrame(c)}var e=document.getElementById("canvas");if(e){var b=e.getContext("webgl")||e.getContext("experimental-webgl");if(b){b.enable(b.CULL_FACE);b.enable(b.DEPTH_TEST);b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);
var n=BC.GL.loadShader(b,"vertex-shader",b.VERTEX_SHADER),k=BC.GL.loadShader(b,"fragment-shader",b.FRAGMENT_SHADER),n=BC.GL.createProgram(b,[n,k]);b.useProgram(n);var g=b.getAttribLocation(n,"a_position"),h=b.getAttribLocation(n,"a_texcoord"),q=b.getUniformLocation(n,"u_projectionMatrix"),p=b.getUniformLocation(n,"u_viewMatrix"),r=b.getUniformLocation(n,"u_matrix"),w=BC.Time.getTimeInSeconds(),s=[0,0,0],n=[1,1,1],f=BC.Matrix.makeScale(n[0],n[1],n[2]),n=BC.Matrix.makeLookAt([0,0.75,2],[0,0,0],[0,1,
0]),l=BC.Matrix.makeInverse(n),m=b.createTexture();b.bindTexture(b.TEXTURE_2D,m);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,new Uint8Array([0,0,0,255]));var u=new Image;u.src="images/textures.png";$(u).load(function(){b.bindTexture(b.TEXTURE_2D,m);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,u);b.generateMipmap(b.TEXTURE_2D)});var t=[0,0,0];$(document).keydown(function(a){switch(a.keyCode){case 32:t[0]=0;t[1]=0;break;case 37:t[0]=0;t[1]=-1;break;case 38:t[0]=-1;t[1]=
0;break;case 39:t[0]=0;t[1]=1;break;case 40:t[0]=1,t[1]=0}});n={numSlices:24,innerRadius:0.75,outerRadius:1,maxY:0.15,minY:-0.15};d();var x=a();$(window).resize(function(){d()&&(x=a())});var v=BC.GL.textureTileSet(4,4,0.002),k=[v.tile(0,0),v.tile(0,1),v.tile(0,2),v.tile(0,3),v.tile(1,0),v.tile(1,1)],v=v.tile(1,2),y=BC.Ring.makeRing(b,n,k),z=BC.Selector.makeSelector(b,n,v);c()}}};return h}(BC||{});$(document).ready(function(){BC.Game.run()});BC=function(h){var d=h.Math=h.Math||{};d.radians=function(a){return a*Math.PI/180};d.circlePoints=function(a,c,d){d=d||0;for(var b=2*Math.PI/c,h=[],k=0;k<c;k++)h[2*k]=a*Math.cos(d+k*b),h[2*k+1]=a*Math.sin(d+k*b);return h};d.cross=function(a,c){return[a[1]*c[2]-a[2]*c[1],a[2]*c[0]-a[0]*c[2],a[0]*c[1]-a[1]*c[0]]};d.subtractVectors=function(a,c){return[a[0]-c[0],a[1]-c[1],a[2]-c[2]]};d.normalize=function(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return 1E-5<c?[a[0]/c,a[1]/c,a[2]/c]:[0,0,0]};
return h}(BC||{});BC=function(h){var d=h.GL=h.GL||{};d.loadShader=function(a,c,d,b){b=b||BC.Util.error;var h=document.getElementById(c);if(!h)return b("** Error getting script element:"+c),null;c=a.createShader(d);a.shaderSource(c,h.text);a.compileShader(c);return a.getShaderParameter(c,a.COMPILE_STATUS)?c:(lastError=a.getShaderInfoLog(c),b("*** Error compiling shader '"+c+"':"+lastError),a.deleteShader(c),null)};d.createProgram=function(a,c,d,b){for(var h=a.createProgram(),k=0;k<c.length;k++)a.attachShader(h,c[k]);
if(d)for(k=0;k<d.length;k++)a.bindAttribLocation(h,b?b[k]:k,d[k]);a.linkProgram(h);return a.getProgramParameter(h,a.LINK_STATUS)?h:(lastError=a.getProgramInfoLog(h),error("Error in program linking: "+lastError),a.deleteProgram(h),null)};d.textureTileSet=function(a,c,d){var b=1/a,h=1/c;return{tile:function(a,c){var U=b*c,q=h*a;return{textureCoord:function(a,c){return[U+d+(b-2*d)*a,q+d+(h-2*d)*c]}}}}};return h}(BC||{});BC=function(h){(h.Util=h.Util||{}).error=function(d){window.console&&(window.console.error?window.console.error(d):window.console.log&&window.console.log(d))};return h}(BC||{});
