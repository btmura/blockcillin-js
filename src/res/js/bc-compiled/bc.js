var BC=function(d){var e=d.Matrix=d.Matrix||{};e.makeLookAt=function(b,a,c){a=BC.Math.normalize(BC.Math.subtractVectors(b,a));c=BC.Math.cross(c,a);var f=BC.Math.cross(a,c);return[c[0],c[1],c[2],0,f[0],f[1],f[2],0,a[0],a[1],a[2],0,b[0],b[1],b[2],1]};e.makePerspective=function(b,a,c,f){b=Math.tan(0.5*Math.PI-0.5*b);var m=1/(c-f);return[b/a,0,0,0,0,b,0,0,0,0,(c+f)*m,-1,0,0,c*f*m*2,0]};e.makeTranslation=function(b,a,c){return[1,0,0,0,0,1,0,0,0,0,1,0,b,a,c,1]};e.makeXRotation=function(b){var a=Math.cos(b);
b=Math.sin(b);return[1,0,0,0,0,a,b,0,0,-b,a,0,0,0,0,1]};e.makeYRotation=function(b){var a=Math.cos(b);b=Math.sin(b);return[a,0,-b,0,0,1,0,0,b,0,a,0,0,0,0,1]};e.makeZRotation=function(b){var a=Math.cos(b);b=Math.sin(b);return[a,b,0,0,-b,a,0,0,0,0,1,0,0,0,0,1]};e.makeScale=function(b,a,c){return[b,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1]};e.makeInverse=function(b){var a=b[0],c=b[1],f=b[2],m=b[3],e=b[4],g=b[5],d=b[6],k=b[7],q=b[8],r=b[9],s=b[10],t=b[11],n=b[12],l=b[13],h=b[14];b=b[15];var u=s*b,v=h*t,w=d*b,x=
h*k,y=d*t,z=s*k,A=f*b,B=h*m,C=f*t,D=s*m,E=f*k,F=d*m,G=q*l,H=n*r,I=e*l,J=n*g,K=e*r,L=q*g,M=a*l,N=n*c,O=a*r,P=q*c,Q=a*g,R=e*c,T=u*g+x*r+y*l-(v*g+w*r+z*l),U=v*c+A*r+D*l-(u*c+B*r+C*l),l=w*c+B*g+E*l-(x*c+A*g+F*l),c=z*c+C*g+F*r-(y*c+D*g+E*r),g=1/(a*T+e*U+q*l+n*c);return[g*T,g*U,g*l,g*c,g*(v*e+w*q+z*n-(u*e+x*q+y*n)),g*(u*a+B*q+C*n-(v*a+A*q+D*n)),g*(x*a+A*e+F*n-(w*a+B*e+E*n)),g*(y*a+D*e+E*q-(z*a+C*e+F*q)),g*(G*k+J*t+K*b-(H*k+I*t+L*b)),g*(H*m+M*t+P*b-(G*m+N*t+O*b)),g*(I*m+N*k+Q*b-(J*m+M*k+R*b)),g*(L*m+O*k+
R*t-(K*m+P*k+Q*t)),g*(I*s+L*h+H*d-(K*h+G*d+J*s)),g*(O*h+G*f+N*s-(M*s+P*h+H*f)),g*(M*d+R*h+J*f-(Q*h+I*f+N*d)),g*(Q*s+K*f+P*d-(O*d+R*s+L*f))]};e.matrixMultiply=function(b,a){return[b[0]*a[0]+b[1]*a[4]+b[2]*a[8]+b[3]*a[12],b[0]*a[1]+b[1]*a[5]+b[2]*a[9]+b[3]*a[13],b[0]*a[2]+b[1]*a[6]+b[2]*a[10]+b[3]*a[14],b[0]*a[3]+b[1]*a[7]+b[2]*a[11]+b[3]*a[15],b[4]*a[0]+b[5]*a[4]+b[6]*a[8]+b[7]*a[12],b[4]*a[1]+b[5]*a[5]+b[6]*a[9]+b[7]*a[13],b[4]*a[2]+b[5]*a[6]+b[6]*a[10]+b[7]*a[14],b[4]*a[3]+b[5]*a[7]+b[6]*a[11]+b[7]*
a[15],b[8]*a[0]+b[9]*a[4]+b[10]*a[8]+b[11]*a[12],b[8]*a[1]+b[9]*a[5]+b[10]*a[9]+b[11]*a[13],b[8]*a[2]+b[9]*a[6]+b[10]*a[10]+b[11]*a[14],b[8]*a[3]+b[9]*a[7]+b[10]*a[11]+b[11]*a[15],b[12]*a[0]+b[13]*a[4]+b[14]*a[8]+b[15]*a[12],b[12]*a[1]+b[13]*a[5]+b[14]*a[9]+b[15]*a[13],b[12]*a[2]+b[13]*a[6]+b[14]*a[10]+b[15]*a[14],b[12]*a[3]+b[13]*a[7]+b[14]*a[11]+b[15]*a[15]]};return d}(BC||{});BC=function(d){(d.Time=d.Time||{}).getTimeInSeconds=function(){return 0.001*Date.now()};return d}(BC||{});BC=function(d){var e=d.GL=d.GL||{};e.loadShader=function(b,a,c,e){e=e||BC.Util.error;var d=document.getElementById(a);if(!d)return e("** Error getting script element:"+a),null;a=b.createShader(c);b.shaderSource(a,d.text);b.compileShader(a);return b.getShaderParameter(a,b.COMPILE_STATUS)?a:(lastError=b.getShaderInfoLog(a),e("*** Error compiling shader '"+a+"':"+lastError),b.deleteShader(a),null)};e.createProgram=function(b,a,c,e){for(var d=b.createProgram(),p=0;p<a.length;p++)b.attachShader(d,a[p]);
if(c)for(p=0;p<c.length;p++)b.bindAttribLocation(d,e?e[p]:p,c[p]);b.linkProgram(d);return b.getProgramParameter(d,b.LINK_STATUS)?d:(lastError=b.getProgramInfoLog(d),error("Error in program linking: "+lastError),b.deleteProgram(d),null)};return d}(BC||{});BC=function(d){(d.Game=d.Game||{}).run=function(){function d(){var b=BC.Time.getTimeInSeconds(),c=b-S;S=b;k[0]+=h[0]*c;k[1]+=h[1]*c;var f=BC.Matrix.makeZRotation(k[2]),b=BC.Matrix.makeYRotation(k[1]),c=BC.Matrix.makeXRotation(k[0]),f=BC.Matrix.matrixMultiply(q,f),f=BC.Matrix.matrixMultiply(f,b),f=BC.Matrix.matrixMultiply(f,c),f=BC.Matrix.matrixMultiply(f,r),f=BC.Matrix.matrixMultiply(f,s),f=BC.Matrix.matrixMultiply(f,t),b=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b);a.bufferData(a.ARRAY_BUFFER,
new Float32Array([-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,-1,1,1,1,1,1,1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,-1,-1,1,1,-1,-1,1,-1,1]),a.STATIC_DRAW);a.enableVertexAttribArray(m);a.vertexAttribPointer(m,3,a.FLOAT,!1,0,0);a.uniformMatrix4fv(g,!1,f);b=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b);a.enableVertexAttribArray(p);a.vertexAttribPointer(p,
2,a.FLOAT,!1,0,0);a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0,0,1,1,0,0,0,0,1,1,1,1,0,1,0,0,1,1,1,1,0,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,0,1,0,0,1,0,0,1,1,0,1,1]),a.STATIC_DRAW);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.drawArrays(a.TRIANGLES,0,36);requestAnimationFrame(d)}var b=document.getElementById("canvas");if(b){var a=b.getContext("webgl")||b.getContext("experimental-webgl");if(a){a.enable(a.CULL_FACE);a.enable(a.DEPTH_TEST);var c=BC.GL.loadShader(a,
"vertex-shader",a.VERTEX_SHADER),f=BC.GL.loadShader(a,"fragment-shader",a.FRAGMENT_SHADER),c=BC.GL.createProgram(a,[c,f]);a.useProgram(c);var m=a.getAttribLocation(c,"a_position"),p=a.getAttribLocation(c,"a_texcoord"),g=a.getUniformLocation(c,"u_matrix"),S=BC.Time.getTimeInSeconds(),k=[BC.Math.radians(0),BC.Math.radians(0),BC.Math.radians(0)],c=[1,1,1],q=BC.Matrix.makeScale(c[0],c[1],c[2]),c=[0,0,0],r=BC.Matrix.makeTranslation(c[0],c[1],c[2]),c=BC.Matrix.makeLookAt([0,5,5],[0,0,0],[0,1,0]),s=BC.Matrix.makeInverse(c),
b=b.width/b.height,c=BC.Math.radians(55),t=BC.Matrix.makePerspective(c,b,1,2E3),n=a.createTexture();a.bindTexture(a.TEXTURE_2D,n);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([0,0,255,255]));var l=new Image;l.src="images/texture.png";l.addEventListener("load",function(){a.bindTexture(a.TEXTURE_2D,n);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,l);a.generateMipmap(a.TEXTURE_2D)});var h=[0,0,0];$(document).keydown(function(a){switch(a.keyCode){case 32:h[0]=
0;h[1]=0;break;case 37:h[0]=0;h[1]=-1;break;case 38:h[0]=-1;h[1]=0;break;case 39:h[0]=0;h[1]=1;break;case 40:h[0]=1,h[1]=0}});d()}}};return d}(BC||{});$(document).ready(function(){BC.Game.run()});BC=function(d){var e=d.Math=d.Math||{};e.radians=function(b){return b*Math.PI/180};e.circlePoints=function(b,a){for(var c=2*Math.PI/a,d=[],e=0;e<a;e++)d[2*e]=b*Math.cos(e*c),d[2*e+1]=b*Math.sin(e*c);return d};e.cross=function(b,a){return[b[1]*a[2]-b[2]*a[1],b[2]*a[0]-b[0]*a[2],b[0]*a[1]-b[1]*a[0]]};e.subtractVectors=function(b,a){return[b[0]-a[0],b[1]-a[1],b[2]-a[2]]};e.normalize=function(b){var a=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);return 1E-5<a?[b[0]/a,b[1]/a,b[2]/a]:[0,0,0]};return d}(BC||
{});BC=function(d){(d.Util=d.Util||{}).error=function(d){window.console&&(window.console.error?window.console.error(d):window.console.log&&window.console.log(d))};return d}(BC||{});
